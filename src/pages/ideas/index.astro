---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("ideas");
posts.sort((a, b) => (a.data.date < b.data.date ? 1 : -1));
---

<BaseLayout title="Ideas — 7WW7">
  <section class="py-12">
    <h1 class="font-display text-4xl">Ideas</h1>
    <p class="mt-4 max-w-2xl text-[var(--muted)]">
      Essays, updates, research, and field stories — written for clarity and
      credibility.
    </p>

    <div class="mt-10 grid gap-4 lg:grid-cols-3">
      {
        posts.map((p) => (
          <a
            href={`/ideas/${p.slug}`}
            class="rounded-3xl border border-black/5 bg-white p-6 shadow-sm hover:shadow-md transition"
          >
            <div class="text-xs font-semibold text-[var(--brand)]">
              {p.data.tag ?? "INSIGHT"}
            </div>
            <div class="mt-2 font-display text-xl">{p.data.title}</div>
            <p class="mt-2 text-sm text-[var(--muted)]">{p.data.description}</p>
            <div class="mt-4 text-sm font-semibold text-[var(--brand)]">
              Read →
            </div>
          </a>
        ))
      }
    </div>
  </section>
</BaseLayout>
